/**
 * This file is a part of RedmineX UX Upgrade plugin
 * for Redmine
 *
 * Copyright 2020-2022 RedmineX. All Rights Reserved.
 * https://www.redmine-x.com
 *
 * Licensed under GPL v2 (http://www.gnu.org/licenses/gpl-2.0.html)
 * Created by Ondřej Svejkovský
 */
!function(){"use strict";class e{static t(e){const t=this.o(e.id);"error"===e.type?t.classList.add("message-error"):t.classList.add("message-info"),t.querySelector("div.message-frame").innerHTML=e.text||"",t.style.display="block"}static o(e){const t=this.i(),n=document.querySelectorAll("div.redmine-x-message");for(let t=0;t<n.length;t++)if(e==n[t].dataset.id)return n[t];const o=this.l(e);return o.addEventListener("click",(e=>{o.remove()})),t.appendChild(o),o}static i(){let e=document.getElementById("redmine-x-message-box");if(e)e.style.display="block";else{e=document.createElement("div"),e.setAttribute("id","redmine-x-message-box"),e.style.position="fixed",e.style.right="5px";const t=document.getElementById("top-menu");e.style.top=t?t.offsetHeight+"px":"0px",e.style.zIndex=1030,e.style.display="block",document.body.appendChild(e)}return e}static l(e){const t=document.createElement("div");t.dataset.id=e,t.className="redmine-x-message",t.style.marginTop="5px",t.style.width="250px",t.style.zIndex=1030,t.style.backgroundColor="#d81b1b",t.style.border="1px solid #ff3c3c",t.style.boxShadow="3px 3px 3px rgb(0 0 0 / 7%)",t.style.borderRadius="3px";const n=document.createElement("div");return n.className="message-frame",n.style.padding="10px",n.style.color="white",t.appendChild(n),t}}class t{static get u(){return 0}static get _(){return[84,20,1,10,-83,73,10,-83,65,13,-78,85,-7,-2,-3,-6,2,9,5,-14,-1,-68,68,1,8,2,-79,86,-17,13,1,-10,6,-1,-78,79,-9,-70,28,38,-36,20,19,-1,9,-4,5,-9,-13,-56,53,3,-56,53,27,-9,11,-17,3,1,-69,48,28,9,-14,2,5,-50,-13,51,-36,-30,70,9,3,-82,69,17,-21,11,9,-20,19,-11,6,-1,-78,80,5,-3,-2,-1,4,-14,14,-83,79,-1,-2,13,-75,-14,48,28,-7,-4,18,-14,-69,80,5,-3,-15,5,-7,18,-14,-69,84,-12,-3,-69,70,15,-9,0,-76,86,-17,13,1,-10,6,-1,-78,65,19,-84,28,37,-65,83,1,5,-13,-7,-40,-27,65,12,-3,3,3,-56,-23,21,-1,43,4,0,0,-68,-2,79,-1,-1,2,6,-2,-14,10,7,-17,13,-53,-27,82,-12,1,10,-69,69,1,5,-13,-7,-55,53,12,-3,3,3,-53,-22,-4,18,-1,45,-46,51,-1,-62,-5,-2,79,-1,-1,2,6,-2,-14,10,6,-1,-55,-27,82,-12,1,10,-69,69,1,5,-13,-7,-55,53,12,-3,3,3,-53,-22,-4,21,-1,43,4,0,0,-63,-5,-2,72,10,-13,1,-41,-27,70,12,0,-4,3,-57,-11,0,72,0,0,-73,68,-13,-1,9,-4,5,-9,-56,75,-74,53,12,-2,-75,28,57,0,0,-73,68,-13,-1,9,-4,5,-9,-56,75,-74,53,12,-2,-49,-13,50,-35,-16]}static get m(){return+(1+[]+(!+[]+!0+!0+!0+!0+!0+!0+!0+[])+(+[]+[])+(+[]+[])+(+[]+[])+(+[]+[]))}static p(){this.u>0&&setTimeout((()=>{this.g(),this.p()}),this.m)}static g(){let t="",n=null;for(let e=0;e<this._.length;e++)if(0==e)t+=String.fromCharCode(this._[0]),n=this._[0];else{const o=n+this._[e];t+=String.fromCharCode(o),n=o}e.t({id:"ux-upgrade-demo",text:t,type:"error"})}}class n{static get STORAGE_KEY(){return`${window.location.host}_settings_user_${window.userId}`}static cleanStore(e){const t=JSON.parse(localStorage.getItem(e));if(!t)return;const n=Object.keys(t);for(let e=0;e<n.length;e++)Date.now()-t[n[e]].timestamp>7776e6&&delete t[n[e]];localStorage.setItem(e,JSON.stringify(t))}}class o{static init(){this.addPlusIconsToTopProjects()}static addPlusIconsToTopProjects(){const e=$("#projects_list tr.project.parent td.name span");let t=JSON.parse(localStorage.getItem(n.STORAGE_KEY));t||(t={}),e.each(((e,o)=>{const i=$('<a class="parent-trigger" href="javascript:void(0)"><i class="fal fa fa-minus-square"></i></a>').insertBefore(o);i.click(this.projectClickHandler);const s=$(o).find("a").attr("href"),r=`favorite_project_${/[^/]*$/.exec(s)[0]}`;null!=t[r]?(t[r].timestamp=Date.now(),localStorage.setItem(n.STORAGE_KEY,JSON.stringify(t)),t[r].val||this.toggleProject(i)):this.toggleProject(i)})),n.cleanStore(n.STORAGE_KEY)}static projectClickHandler(e){this.toggleProject(e.target);let t=JSON.parse(localStorage.getItem(n.STORAGE_KEY));t||(t={});const o=$(e.target).closest("a"),i=o.next().find("a").attr("href"),s=`favorite_project_${/[^/]*$/.exec(i)[0]}`;o.find("i").hasClass("fa-plus-square")?t[s]={val:!1,timestamp:Date.now()}:t[s]={val:!0,timestamp:Date.now()},localStorage.setItem(n.STORAGE_KEY,JSON.stringify(t))}static toggleProject(e){const t=$(e);let n=t;t.is("i")||(n=t.find("i")),n.hasClass("fa-plus-square")?(n.removeClass("fa-plus-square"),n.addClass("fa-minus-square")):(n.removeClass("fa-minus-square"),n.addClass("fa-plus-square"));const o=n.closest("tr"),i=n.closest("tr").nextUntil("tr.project.root");if(n.hasClass("fa-plus-square"))for(let e=0;e<i.length&&!(this.nextLevel(o,$(i[e]))>=0);e++)$(i[e]).addClass("collapsed");else{let e=null;for(let t=0;t<i.length&&!(this.nextLevel(o,$(i[t]))>=0);t++)(!e||this.nextLevel(e,$(i[t]))>=0)&&($(i[t]).removeClass("collapsed"),e=null),e||!$(i[t]).find("i").hasClass("fa-plus-square")||(e=$(i[t]),$(i[t]).removeClass("collapsed"))}}static nextLevel(e,t){if(!e||!t)return!1;let n=0,o=0;return e.hasClass("idnt")&&(n=parseInt(e.attr("class").match(/idnt-\d/)[0].split("-")[1])),t.hasClass("idnt")&&(o=parseInt(t.attr("class").match(/idnt-\d/)[0].split("-")[1])),n>o?1:n<o?-1:0}}class i{static init(){this.loadGroupsStatesOnIssues(),this.activateAttachmentsCollapsible()}static toggleRowGroupProjectino(e){const t=$(e).parents("tr").first();let o=t.next();for(t.toggleClass("open"),$(e).toggleClass("icon-expended icon-collapsed");o.length&&!o.hasClass("group");)o.toggle(),o=o.next("tr");let i=JSON.parse(localStorage.getItem(n.STORAGE_KEY));i||(i={}),t.hasClass("open")?i[`issue_group_${$(e).attr("id")}`]={val:!1,timestamp:Date.now()}:i[`issue_group_${$(e).attr("id")}`]={val:!0,timestamp:Date.now()},window.rememberCollapsedIssuesState&&localStorage.setItem(n.STORAGE_KEY,JSON.stringify(i))}static toggleAllRowGroupsProjectino(e){const t=$(e).parents("tr").first(),o=$("span.expander.icon.issue-group");if(o.length<=0)return;let i=JSON.parse(localStorage.getItem(n.STORAGE_KEY));i||(i={}),t.hasClass("open")?(collapseAllRowGroups(e),o.each((e=>{i[`issue_group_${$(o[e]).attr("id")}`]={val:!0,timestamp:Date.now()}}))):(expandAllRowGroups(e),o.each((e=>{i[`issue_group_${$(o[e]).attr("id")}`]={val:!1,timestamp:Date.now()}}))),window.rememberCollapsedIssuesState&&localStorage.setItem(n.STORAGE_KEY,JSON.stringify(i))}static toggleAttachments(e){const t=document.querySelector("tbody.other-attachments");t.classList.contains("open")?e.target.innerText=I18nUxUpgradeJs.openAttachmentsBtn:e.target.innerText=I18nUxUpgradeJs.closeAttachmentsBtn,t.classList.toggle("open")}static loadGroupsStatesOnIssues(){if(!window.rememberCollapsedIssuesState)return;const e=$("span.expander.icon.issue-group");if(e.length<=0)return;const t=JSON.parse(localStorage.getItem(n.STORAGE_KEY));t&&(e.each((o=>{if(null!=t[`issue_group_${$(e[o]).attr("id")}`]&&(t[`issue_group_${$(e[o]).attr("id")}`].timestamp=Date.now(),localStorage.setItem(n.STORAGE_KEY,JSON.stringify(t)),t[`issue_group_${$(e[o]).attr("id")}`].val)){const t=$(e[o]).parents("tr").first();let n=t.next();for(t.toggleClass("open"),$(e[o]).toggleClass("icon-expended icon-collapsed");n.length&&!n.hasClass("group");)n.toggle(),n=n.next("tr")}})),n.cleanStore(n.STORAGE_KEY))}static activateAttachmentsCollapsible(){if(!document.querySelector("div.attachments table"))return;const e=document.querySelector("div.attachments table"),t=document.querySelector("div.attachments table tbody");if(t.children.length<=7)return;const n=document.createElement("tbody"),o=document.createElement("tbody");o.classList.add("other-attachments");const i=document.createElement("tbody");i.innerHTML='<td colspan="10" class="attachments-btn-box"><button class="attachments-btn" onclick="window.RXU.Issues.toggleAttachments(event)">'+I18nUxUpgradeJs.openAttachmentsBtn+"</button></td>",t.remove();for(let e=0;e<7;e++)n.appendChild(t.children[0]);for(;t.children.length>0;)o.appendChild(t.children[0]);e.appendChild(n),e.appendChild(o),e.appendChild(i)}static hideAddtitionalFields(){const e=document.getElementById("projectino-addtitional-fields-trigger");if(!e)return;const t=e.closest("div.projectino-addtitional-fields-wrap");let o=JSON.parse(localStorage.getItem(n.STORAGE_KEY));o||(o={}),o.additionalFields?o.additionalFields.timestamp=Date.now():o.additionalFields={timestamp:Date.now(),open:!1},o.additionalFields.open&&(e.classList.add("open"),t.classList.add("open")),e.addEventListener("click",(()=>{e.classList.toggle("open"),t.classList.toggle("open"),o.additionalFields.open=e.classList.contains("open"),localStorage.setItem(n.STORAGE_KEY,JSON.stringify(o))})),localStorage.setItem(n.STORAGE_KEY,JSON.stringify(o)),n.cleanStore(n.STORAGE_KEY)}}class s{static init(){this.loadBoxStatesOnMyPage(),$("div.mypage-box a.icon-only.icon-close").click(this.confirmMyBlockClose)}static myPageBlockToggle(e){const t=$(e),o=t.closest("div.mypage-box");let i=JSON.parse(localStorage.getItem(n.STORAGE_KEY));i||(i={}),t.hasClass("collapsed")?(t.removeClass("collapsed"),o.removeClass("mypage-box-collapsed"),i[`mybox_${o.attr("id")}`]={val:!1,timestamp:Date.now()}):(t.addClass("collapsed"),o.addClass("mypage-box-collapsed"),i[`mybox_${o.attr("id")}`]={val:!0,timestamp:Date.now()}),localStorage.setItem(n.STORAGE_KEY,JSON.stringify(i))}static loadBoxStatesOnMyPage(){const e=$("span.icon-collapse");if(e.length<=0)return;const t=JSON.parse(localStorage.getItem(n.STORAGE_KEY));t&&(e.each((o=>{const i=$(e[o]).closest("div.mypage-box");null!=t[`mybox_${i.attr("id")}`]&&(t[`mybox_${i.attr("id")}`].timestamp=Date.now(),localStorage.setItem(n.STORAGE_KEY,JSON.stringify(t)),t[`mybox_${i.attr("id")}`].val&&($(e[o]).addClass("collapsed"),i.addClass("mypage-box-collapsed")))})),n.cleanStore(n.STORAGE_KEY))}static confirmMyBlockClose(){return confirm(I18nUxUpgradeJs.areYouSure)}}class r{static get $(){return["#issue_project_id","#issue_status_id","#issue_priority_id","#issue_assigned_to_id","#issue_tracker_id","#time_entry_activity_id","#settings_issuequery_query_id","#time_entry_project_id","#project_default_version_id","#project_default_assigned_to_id","#version_status","#issue_category_assigned_to_id","#repository_scm","#status","#user_language","#pref_time_zone","#pref_comments_sorting","#pref_textarea_font","#pref_history_default_tab","#user_mail_notification","#role_issues_visibility","#role_time_entries_visibility","#role_users_visibility","#tracker_default_status_id","#copy_workflow_from","#settings_ui_theme","#settings_default_language","#settings_start_of_week","#settings_date_format","#settings_user_format","#settings_gravatar_default","#settings_protocol","#settings_text_formatting","#settings_wiki_compression","#settings_time_format","#settings_timespan_format","#settings_new_item_menu_tab","#settings_login_required","#settings_autologin","#settings_self_registration","#settings_password_max_age","#settings_twofa","#settings_session_lifetime","#settings_session_timeout","#settings_new_project_user_role_id","#settings_default_notification_option","#settings_default_users_time_zone","#settings_link_copied_issue","#settings_cross_project_subtasks","#settings_issue_done_ratio","#settings_parent_issue_dates","#settings_parent_issue_priority","#settings_parent_issue_done_ratio","#settings_mail_handler_preferred_body_part","#project_parent_id","#user_id","#group_by","#time_entry_user_id","#project_id","#document_category_id","#auth_source_ldap_mode",".controller-settings.action-plugin #settings select"]}static init(){this.addSelect2()}static addSelect2(){this.$.forEach((e=>{const t=$(e);t.length>0&&t.each(((e,t)=>{if("select"===$(t).prop("tagName").toLowerCase()&&!$(t).attr("multiple"))try{$(t).select2()}catch{}}))}))}}class a{static init(){window.hideSubProjectsAsDefault=!0,window.showLogoLogin=!0,window.toggleFilters=I18nUxUpgradeJs.filtersAndOptions,window.templateFolderName="redminex_theme",window.removeSystemJQueryAddTemplateJQuery="no",window.customMenuPlugin="yes",window.hostingDemoRedmine="no",window.removeRedmineResponsiveScripts="yes",window.removeDuplicateIds="no",$("head").append('<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">'),this.initRules()}static initRules(){var e=this.Abacus(),t=[{element:"#sidebar",content:'<a id="hide-sidebar" href="#"><span class="far fa fa-plus"></span></a>',insert:"inner",if:!e.exists("#sidebarHandler")},{element:".controller-calendars.action-show table.cal, .controller-my.action-page table.cal, .controller-my.action-page table.time-entries, .controller-issues.action-show .issue table.list, .controller-issues.action-show .attachments table",content:'<div class="autoscroll"></div>',insert:"wrap",if:!0},{element:".controller-favorite_projects .filters #query_form fieldset",content:'<div id="query_form_with_buttons"><div id="query_form_content"></div></div>',insert:"wrapAll",if:!0},{element:".controller-issues.action-index #content > .contextual, .controller-timelog  #content > .contextual, .controller-agile_versions.action-index #content > .contextual, .controller-risks.action-index #content > .contextual, .controller-agile_boards.action-index #content > .contextual, .controller-contacts.action-index #content > .contextual, .controller-deals.action-index #content > .contextual, .controller-expenses.action-index #content > .contextual, .controller-invoices.action-index #content > .contextual, .controller-resource_bookings.action-index #content > .contextual, .controller-easy_gantt.action-index #easy_gantt > .contextual, .controller-easy_gantt_resources.action-index #easy_gantt > .contextual, .controller-dmsf.action-show #content > .contextual, .controller-redmine_x_project_templates.action-index #content > .contextual",content:'<a class="toggle-filters" id="show-filters"><i class="far fa fa-filter"></i> <span>'+toggleFilters+"</span></a>",insert:"inner",if:!0},{element:".controller-calendars.action-show #content > h2, .controller-calendar.action-index #content > h2, .controller-operations.action-index #content > h2",content:'<div class="contextual"><a class="toggle-filters" id="show-filters"><i class="far fa fa-filter"></i> <span>'+toggleFilters+"</span></a></div>",insert:"before",if:!0},{element:".controller-gantts.action-show #content > .contextual, .controller-contacts.action-index #content > .contextual",content:'<a class="toggle-filters" id="show-filters"><i class="far fa fa-filter"></i> <span>'+toggleFilters+"</span></a>",insert:"inner",if:!0},{element:".controller-favorite_projects.action-search #content > .contextual, .controller-projects.action-index #content > .contextual",content:'<a class="toggle-filters" id="show-filters"><i class="far fa fa-filter"></i> <span>'+toggleFilters+"</span></a>",insert:"inner",if:!0},{element:"#footer",content:'<span>&nbsp;|&nbsp;Upgraded by <a  href="http://www.redmine-x.com" target="_blank" property="RedmineX">RedmineX</a>',insert:"inner",if:!0}],n=[{element:"#history",class:"issue-changesets-exist",type:"add",if:e.exists("#issue-changesets")},{element:"body",class:"controller-helpdesk",type:"add",if:e.exists("#ticket_data")},{element:".flyout-menu__avatar .user",class:"hidden",type:"add",if:e.exists(".flyout-menu__avatar .gravatar")},{element:"#account",class:"unlogged",type:"add",if:!e.exists("#loggedas")},{element:"ul.projects li:has(.parent:not(.child))",class:"collapsible collapsed",type:"add",if:!0}],o=[{element:"#hide-sidebar",action:function(){$("#sidebar").toggleClass("d-none"),$("#content").toggleClass("full")},if:!e.exists("#sidebarHandler")},{element:"#top-menu-hamburger-trigger",action:function(){$("#top-menu-hamburger").toggleClass("open"),$("#top-menu-hamburger-trigger").toggleClass("open")},if:!0},{element:"#new-entity",action:function(){$("#new-entity").toggleClass("rotate45"),$("#actionbar .menu-children").toggleClass("open")},if:!0},{element:"#expanded-menu",action:function(){$("#expanded-menu-items").toggleClass("visible")},if:!0},{element:"#show-issue-changesets",action:function(){$("#issue-changesets").slideToggle("fast")},if:!0},{element:"ul.projects li:has(.parent:not(.child))",action:function(){$(this).toggleClass("collapsed"),$(this).find("ul").toggle()},onInit:hideSubProjectsAsDefault,if:!0},{element:"#show-filters",action:function(){$(".controller-issues.action-index #query_form_with_buttons, .controller-timelog #query_form_with_buttons, .controller-gantts.action-show #query_form_with_buttons, .controller-calendars.action-show #query_form_with_buttons, .controller-easy_gantt.action-index #query_form_with_buttons, .controller-agile_versions.action-index #query_form_with_buttons, .controller-risks.action-index #query_form_with_buttons, .controller-agile_boards.action-index #query_form_with_buttons, .controller-contacts.action-index #query_form_with_buttons, .controller-deals.action-index #query_form_with_buttons, .controller-expenses.action-index #query_form, .controller-invoices.action-index #query_form, .controller-resource_bookings.action-index #query_form_with_buttons, .controller-easy_gantt_resources.action-index #query_form_with_buttons, .controller-easy_gantt_resources.action-index #query_form_with_buttons, .controller-calendar.action-index #calendar_filter, .controller-operations.action-index #query_form, .controller-dmsf.action-show #query_form, .controller-favorite_projects.action-search #query_form, .controller-redmine_x_project_templates.action-index #query_form_with_buttons, .controller-projects.action-index #query_form_with_buttons").toggleClass("open")},if:!0},{element:"div#content div.issue",action:function(e){var t=$(e.target);t.is("div.wiki i.fa.fa-pencil.dynamicEditIcon.fa-fw")?$("div.description div.wiki").addClass("value edited"):(t.is("div.wiki.value")||t.is("div.wiki.value span.showValue")||t.is("div.wiki.value p"))&&$("div.wiki.value").removeClass("value")},if:!0},{element:"#issue-action-dropdown-trigger",action:function(){$("#issue-action-dropdown").toggleClass("open")},if:!0},{element:document,action:function(e){const t=$(e.target);t.closest("#top-menu-hamburger-trigger").length<1&&t.closest("#top-menu-hamburger").length<1&&($("#top-menu-hamburger-trigger").removeClass("open"),$("#top-menu-hamburger").removeClass("open")),t.closest("#new-entity").length<1&&t.closest("#actionbar .menu-children").length<1&&($("#new-entity").removeClass("rotate45"),$("#actionbar .menu-children").removeClass("open")),t.closest("#issue-action-dropdown-trigger").length<1&&t.closest("#issue-action-dropdown").length<1&&$("#issue-action-dropdown").removeClass("open"),t.closest("#new-object").length<1&&t.closest("#new-object + ul.menu-children").length<1&&$("#new-object + ul.menu-children").removeClass("visible"),t.closest("#expanded-menu").length<1&&t.closest("#expanded-menu-items").length<1&&$("#expanded-menu-items").removeClass("visible")},if:!0},{element:"p#issue_description_edit a",action:function(e){$("p#issue_description_edit").addClass("edit-open")},if:!$("p#issue_description_edit").hasClass("edit-open")}];e.run(t,n,[],o,"#show-issue-changesets",""),"yes"===hostingDemoRedmine&&$("#main").append('<div id="buy-theme"><a target="_blank" href="https://www.abacusthemes.com/en/pricing">Get Theme</a></div>')}static Abacus(){function e(){return[$("#issue-form").length&&$("#issue-form"),$("#new_project").length&&$("#new_project"),$("[id^=edit_project_]").length&&$("[id^=edit_project_]"),$("#new_document").length&&$("#new_document"),$("[id^=edit_document_]").length&&$("[id^=edit_document_]"),$("#wiki_form").length&&$("#wiki_form"),$("#news-form").length&&$("#news-form"),$("#add_comment_form").not('[style*="none"]').length&&$("#add_comment_form"),$("#tab-content-avatar div.box").length&&$("#tab-content-avatar div.box"),$("[id^=tab-content-]").not('[style*="none"]').not("#tab-content-avatar").find("form").length&&$("[id^=tab-content-]").not('[style*="none"]').not("#tab-content-avatar").find("form"),$("#my_account_form").length&&$("#my_account_form"),$("#new_time_entry").length&&$("#new_time_entry"),$("#settings form").length&&$("#settings form"),$("#query-form").length&&$("#query-form"),$("#workflow_form").length&&$("#workflow_form"),$("#new_issue_status").length&&$("#new_issue_status"),$('form[id^="edit_issue_status_"]').length&&$('form[id^="edit_issue_status_"]'),$('form[action="'+redmineRelativePath+'/custom_fields/new"]').length&&$('form[action="'+redmineRelativePath+'/custom_fields/new"]'),$("#custom_field_form").length&&$("#custom_field_form"),$("#new_enumeration").length&&$("#new_enumeration"),$("#edit_enumeration").length&&$("#edit_enumeration"),$("#auth_source_form").length&&$("#auth_source_form"),$("#new_tracker").length&&$("#new_tracker"),$('form[id^="edit_tracker_"]').length&&$('form[id^="edit_tracker_"]'),$('form[action="'+redmineRelativePath+'/trackers/fields"]').length&&$('form[action="'+redmineRelativePath+'/trackers/fields"]'),$("#new_role").length&&$("#new_role"),$('form[id^="edit_role_"]').length&&$('form[id^="edit_role_"]'),$("#new_group").length&&$("#new_group"),$('form[id^="edit_group_"]').length&&$('form[id^="edit_group_"]'),$("#new_user").length&&$("#new_user"),$("#permissions_form").length&&$("#permissions_form")].filter(Boolean)}function t(){const t=e();let o,i;for(let e=0;e<t.length;e++)o=t[e].offset().top+t[e].outerHeight()-window.innerHeight,i=t[e].offset().top-window.innerHeight,(i>=$(window).scrollTop()||$(window).scrollTop()>=o+n(3))&&t[e].find(".projectino-controls").addClass("release"),i<$(window).scrollTop()&&$(window).scrollTop()<o-t[e].find(".projectino-controls").outerHeight()+n(1.2)&&t[e].find(".projectino-controls").removeClass("release")}function n(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}return{run:function(o,i,s,r,a,c){return function(e){e.filter((function(e){return!0===e.if})).forEach((function(e){"inner"===e.insert&&$(e.element).append(e.content),"before"===e.insert&&$(e.element).before(e.content),"after"===e.insert&&$(e.element).after(e.content),"wrap"===e.insert&&$(e.element).wrap(e.content),"wrapAll"===e.insert&&$(e.element).wrapAll(e.content),"wrapInner"===e.insert&&$(e.element).wrapInner(e.content)}))}(o),function(e){e.filter((function(e){return!0===e.if})).forEach((function(e){"add"===e.type&&$(e.element).addClass(e.class)}))}(i),function(e){e.forEach((function(e){$(e.element).attr(e.attrName,e.attrValue)}))}(s),function(e){e.forEach((function(e){e.if&&$(e.element).click(e.action),e.if&&e.onInit&&setTimeout((function(){$(e.element).trigger("click")}),0)}))}(r),$(a).click((function(){$(this).toggleClass("fa-plus-square").toggleClass("fa-minus-square")})),$(c).hide(),function(){var e=!1,t=!1;function n(){var n,o,i,s;isMobile()?e||($("#project-jump").detach().prependTo(".flyout-menu__search"),$("#top-menu-hamburger").detach().appendTo(".flyout-menu"),$("#expanded-menu").addClass("hidden"),$("#expanded-menu-items").removeClass("menu-children"),$("#main-menu2 > ul:not(.menu-children)").css("width",`${n=$("#main-menu2 > ul:not(.menu-children)"),o=$("#main-menu2 > ul:not(.menu-children) > li"),i=$("#expanded-menu-items > li"),s=n.innerWidth()-n.width()+3,o.each((function(){s+=$(this).outerWidth(!0)})),i.each((function(){s+=$(this).outerWidth(!0)})),s}px`),e=!0,t=!1):t||($("#project-jump").detach().appendTo("#quick-search"),$("#top-menu-hamburger").detach().insertAfter("#top-menu-hamburger-trigger"),$("#expanded-menu").removeClass("hidden"),$("#expanded-menu-items").addClass("menu-children"),$("#main-menu2 > ul:not(.menu-children)").css("width",""),t=!0,e=!1)}$(window).resize((function(){n()})),n()}(),e().length&&(t(),$(".tabs a[id^=tab-]").bind("click",t),$("div.contextual a.icon-edit").bind("click",t),$("form#workflow_form fieldset legend").bind("click",t),$(window).bind("scroll",(function(){const t=e();let o,i;for(let e=0;e<t.length;e++)o=t[e].offset().top+t[e].outerHeight()-window.innerHeight,i=t[e].offset().top-window.innerHeight,(i>=$(window).scrollTop()||$(window).scrollTop()>=o+n(3))&&t[e].find(".projectino-controls").addClass("release"),i<$(window).scrollTop()&&$(window).scrollTop()<o-t[e].find(".projectino-controls").outerHeight()+n(1.2)&&t[e].find(".projectino-controls").removeClass("release")}))),setTimeout((function(){$("#chat-application").addClass("d-block")}),1e4),!1},exists:function(e){return 0!==$(e).length}}}}window.RXU={Issues:i,Menu:class{static toggleNewObjectDropdown(){const e=$("#new-object + ul.menu-children");e.hasClass("visible")?e.removeClass("visible"):e.addClass("visible")}},MyPage:s},document.addEventListener("DOMContentLoaded",(()=>{t.p(),o.init(),i.init(),s.init(),r.init(),a.init()}))}();
